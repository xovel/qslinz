// JavaScript Document
//QsLinz常用特效。必须先引入QsLinz.js核心部分
;(function(W,U){
var L=W.location,D=W.document,M=D.documentElement,I=!-[1,];
Q.always=function(f,s,o){o=Q.extend({node:window,trigger:"scroll"},o||{});f=Q(f).get(0);s=Q(s).get(0);if(!f||!s)return;function A(){var c=M.clientHeight,g=Q.getSize(f).height,t=Q.getSize(s).height,p=g<t?f:s,q=g>t?f:s,u=Math.abs(g-t);m=Math.min(g,t);if(g===t)return;p.style.position="relative";var v=parseFloat(Q.getStyle(p,"top"))||0,x=Q.clientRect(p),y=Q.clientRect(q),k=x.top,l=y.top,b=c-x.bottom;if(k<0&&b>0)v=Math.min(v+b,u);if(k>0&&b<0)v=l>=0?0:v-k;if(m<=c){v=-l;v=v<=0?0:v>u?u:v;}if(v>=0&&v<=u)Q.setStyle(p,{top:v+"px"});};Q.on(o.node,o.trigger,function(){A();});};

Q.tabs=function(n,c,o){if(arguments.length===1){o=n;}o=Q.extend({node:D,nav:n,con:c,trigger:"mouseover",normal:"normal",active:"active",init:1,fade:0,keep:!0,conc:!1,auto:0,start:100,callback:null},o||{});var Qn=Q(o.nav,o.node),Qc=Q(o.con,o.node),i=0,j=Qn.size(),k=Qc.size(),b=!!(k&&j===k),t=null;if(!j)return;Qn.removeClass(o.active).addClass(o.normal);if(o.init&&o.keep){Qn.eq(o.init-1).removeClass(o.normal).addClass(o.active);}if(b){o.conc?Qc.removeClass(o.active).addClass(o.normal):Qc.hide();if(o.init){o.conc?Qc.eq(o.init-1).removeClass(o.normal).addClass(o.active):Qc.eq(o.init-1).show();}}function tabs(index){Qn.removeClass(o.active).addClass(o.normal).eq(index).removeClass(o.normal).addClass(o.active);if(b){var oCon=o.conc?Qc.removeClass(o.active).addClass(o.normal).eq(index).removeClass(o.normal).addClass(o.active).get(0):Qc.hide().eq(index).show().get(0);if(o.fade){Q.animate(oCon,'opacity',1,o.fade,'linear',null,0);}if(typeof o.callback==="function")o.callback.call(oCon,index);}}Qn.on(o.trigger,function(){var index=Qn.index(this);if(Qn.hasClass(o.active,index)) return;tabs(index);});if(!o.keep){Qn.mouseout(function(){Q(this).removeClass(o.active ).addClass(o.normal);Qc.hide();});if(b)Qc.mouseout(function(){o.conc?Q(this).removeClass(o.active).addClass(o.normal):Q(this).hide();});}function play(){var id=0;for(i=0;i<j;i++){if(Qn.hasClass(o.active,i))id=i+1;}tabs((id+j)%j);}if(o.auto){setTimeout(function(){clearInterval(t);t=setInterval(function(){play();},o.auto);},o.start);Qc.hover(function(){clearInterval(t);},function(){clearInterval(t);t=setInterval(function(){play();},o.auto);});Qn.eq(0).parent().hover(function(){clearInterval(t);},function(){clearInterval(t);t=setInterval(function(){play();},o.auto);});}};

Q.lazyload=function(e,o){if(o===U){o=e;e=Q.Q(o.selector||"img");}o=Q.extend({attr:"original",threshold:0,fade:!1,fades:{},node:W,trigger:"scroll",placeholder:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},o||{});var y=[],i,j,k=0;for(i=0,j=e.length;i<j;i++){if(!A(e[i]))y[k++]=e[i];}Q.each(y,function(){B(this);});Q.on(o.node,o.trigger,C);function C(){if(k===0){Q.unbind(o.node,o.trigger,C);return;}for(var i=0,j=y.length;i<j;i++){var b=y[i];if(b.getAttribute("lazyload")==="false"){if(A(b)){L(b);}}}}function A(x){var cH=M.clientHeight,r=Q.clientRect(x),t=r.top,m=cH-r.bottom;return t+o.threshold<0||m+o.threshold<0?!1:!0;}function B(x){var s=x.src;x.setAttribute(o.attr,s);x.setAttribute("src",o.placeholder);x.setAttribute("lazyload","false");}function L(x){var s=x.getAttribute(o.attr);x.src=s;x.setAttribute("lazyload","true");x.removeAttribute(o.attr);--k;if(o.fade){Q.animate(x,'opacity',1,o.fade);};}};

Q.gotoTop=function(o){if(Q.B.isIE6)return;o=Q.extend({value:0,speed:20,smooth:5,elem:null,father:D.body,callback:null,bottom:50,right:560,zindex:65535,color:"blue",hover:"red"},o||{});var e;if(!o.elem){e=D.createElement("div");o.father.appendChild(e);}else{e=Q(o.elem).get(0);}if(o.value==0)e.title="\u81f3\u9876\u90e8";var q=Q(e);if(!o.elem)q.css({position:"fixed",zIndex:o.zindex,width:"50px",height:"50px",bottom:o.bottom+"px",right:"50%",marginRight:(-o.right)+"px",backgroundColor:o.color,cursor:"pointer"}).hover(function(){Q(this).css({backgroundColor:o.hover});},function(){Q(this).css({backgroundColor:o.color});});q.click(function(){Q.scrollTo(o.value,o.speed,o.smooth,o.callback);});};Q.scrollTo=function(v,s,h,f){v=v||0;s=s||20;h=h||5;(function(){var t=Q.getScrollTop();var d=t-v;var m=d/h;var c=!0;if(m<=v){m=v;c=!1;}else{m=t-m;c=!0;}W.scrollTo(0,m);if(c){setTimeout(arguments.callee,s);}else{if(typeof f==="function")f();};})();};

Q.scroll=function(e,f,s,d,k){if(!e)return;var z=Q.getInnerSize(e),_=e.cloneNode(true),s=s||20,w=D.createElement("div"),c=D.createElement("div"),n=D.createElement("div"),S={},a={up:1,top:1,bottom:2,down:2,left:3,right:4},b=typeof f==="number"?f:(a[(f||"").toLowerCase()]||1),g=b<3?"top":"left";Q.clear(e);e.appendChild(w);Q.setStyle(w,{overflow:"hidden",width:(d||z.width)+"px",height:(k||z.height)+"px",position:"relative"});n.innerHTML=_.innerHTML;w.appendChild(c);c.appendChild(n);Q.setStyle(c,{zoom:1,position:"relative"});if(g==="left"){Q.setStyle(c,"width","65535px");Q.setStyle(n,{float:"left"});};var y=Q.getSize(n),h=[0,-y.height,0,-y.width,0],v=h[b],t=h[b-1];c.appendChild(n.cloneNode(true));S={play:function(){var p,q=parseFloat(Q.getStyle(c,g));if(isNaN(q))q=t;p=Math.abs(v-q)*s;Q.animate(c,g,v,p,'linear',function(){Q.setStyle(c,g,t+"px");S.play();},q);},stop:function(){Q.stop(c,g);},clear:function(){S.stop();e.parentNode.replaceChild(_,e);}};Q(c).hover(S.stop,S.play);S.play();return S;}

Q.extend({addFav:function(u,t){if(I){W.external.AddFavorite(u,t);}else{if(W.sidebar||W.chrome){alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u0043\u0074\u0072\u006c\u002b\u0044\u624b\u52a8\u8bbe\u7f6e\u002e');}else{var a=D.createElement("a");a.href="javascript:window.external.AddFavorite('"+u+"','"+t+"');";a.click();}}},setHomepage:function(u){if(D.all){D.body.style.behavior='url(#default#homepage)';D.body.setHomePage(u);}else{try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");}catch(e){try{var p=Components.classes['@mozilla.org/preferences-service;1'].getService(Components.interfaces.nsIPrefBranch);p.setCharPref('browser.startup.homepage',u);}catch(e){alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u6d4f\u89c8\u5668\u83dc\u5355\u624b\u52a8\u8bbe\u7f6e\u002e');}}}}});Q.fn.extend({fav:function(o){o=Q.extend({url:L.href,title:D.title,trigger:"click"},o||{});return this.on(o.trigger,function(){Q.addFav(o.url,o.title);});},homepage:function(u){u=u||L.href;return this.click(function(){Q.setHomepage(u);});}});

Q.extend(Q.easing,{easeInQuad:function(t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b},easeInCubic:function(t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b},easeInBounce:function(t,b,c,d){return c-Q.easing.easeOutBounce(d-t,0,c,d)+b},easeOutBounce:function(t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b}},easeInOutBounce:function(t,b,c,d){if(t<d/2)return Q.easing.easeInBounce(t*2,0,c,d)*.5+b;return Q.easing.easeOutBounce(t*2-d,0,c,d)*.5+c*.5+b}});

Q.dialog=Q.dialogue=function(o){o=Q.extend({drag:true,fadein:0,fadeout:0,top:200,left:300,width:600,title:"\u63d0\u793a",core:"",tip:"",confirm:true,onshow:null,callback:null,auto:0,opacity:0.8,background:"#ccc",zindex:99999},o||{});var bg=D.createElement("div");D.body.appendChild(bg);Q.setStyle(bg,{position:"absolute",width:"100%",top:"0px",left:"0px",zIndex:(o.zindex-1),backgroundColor:o.background,opacity:o.opacity,height:Math.max(D.documentElement.clientHeight,D.body.offsetHeight)+"px"});var qd=D.createElement("div");D.body.appendChild(qd);Q.setStyle(qd,{position:Q.B.isIE6?"absolute":"fixed",top:o.top+"px",left:o.left+"px",border:"1px solid #ccc",padding:"5px",zIndex:o.zindex,backgroundColor:"#999",width:o.width+"px"});var head=D.createElement('div');qd.appendChild(head);head.style.cssText='height:30px;background-color:blue;line-height:30px;width:100%;';head.innerHTML='<h3 style="float:left;color:white;font-size:14px;text-indent:1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:80%;">'+o.title+'</h3>';var off=D.createElement('div');head.appendChild(off);off.style.cssText='float:right;height:20px;line-height:20px;font-family:microsoft yahei;margin-right:5px;margin-top:5px;color:red;font-weight:bolder;cursor:pointer;width:20px;background-color:#ccc;text-align:center;';off.title='\u5173\u95ed';off.innerHTML='X';var core=D.createElement('div');qd.appendChild(core);core.style.cssText='background-color:white;padding:20px;';if(o.core.nodeType===1){core.appendChild(o.core);}else{core.innerHTML=o.core;}var tip=D.createElement('div');core.appendChild(tip);tip.style.cssText='font-size:12px;margin-top:10px;border-top:2px solid #333;';tip.innerHTML=o.tip;if(!o.tip)tip.style.display="none";if(o.confirm){var cfmbox=D.createElement('div');qd.appendChild(cfmbox);cfmbox.style.cssText='padding:8px 10px;height:26px;text-align:right;border-top:1px solid #ccc;background-color:#F2F2F2;';var cfm=D.createElement('button');cfmbox.appendChild(cfm);cfm.style.cssText='background-color:#06C;vertical-align:middle;overflow:hidden;margin-right:3px;padding:0px;height:23px;border:1px solid #999;cursor:pointer; box-shadow:#E5E5E5 0px 1px 0px;';cfm.innerHTML='<strong style="padding:0px 10px;line-height:21px;color:white;font-size:14px;font-family:microsoft yahei;">\u786e\u5b9a</strong>';}if(o.fadein){Q.animate(qd,"opacity",1,o.fadein,"linear",o.onshow,0);}else{if(typeof o.onshow==="function")o.onshow.call(qd);}function qClose(){if(o.fadeout){Q.animate(qd,"opacity",0,o.fadeout,"linear",_close,1);}else{_close();}}function _close(){bg.style.display="none";qd.style.display="none";D.body.removeChild(bg);D.body.removeChild(qd);if(typeof o.callback==="function"){o.callback();}}Q.bind(off,"click",qClose);if(o.confirm)Q.bind(cfm,"click",qClose);if(o.auto){var tmcd=parseInt(o.auto,10),_tmrTip=null;tip.style.display="block";(function(){if(qd.style.display==="none"){clearTimeout(_tmrTip);tip.innerHTML=o.tip;return;}if(tmcd>0){tip.innerHTML=o.tip+""+tmcd+"\u79d2\u540e\u5173\u95ed";--tmcd;_tmrTip=setTimeout(arguments.callee,1000);}else{tip.innerHTML=o.tip;qClose();}})();}if(o.drag){var dragData={};head.style.cursor = "move";head.onmousedown=function(e){try{dragObj(qd,e,1);}catch(ex){}};}function dragObj(obj,e,mode){e=e?e:window.event||arguments.callee.caller.arguments[0];switch(mode){case 1:dragData.x=e.clientX;dragData.y=e.clientY;dragData.left=parseInt(qd.style.left,10);dragData.top=parseInt(qd.style.top,10);head.onmousemove=function(e){try{dragObj(qd,e,2);}catch(ex){}};head.onmouseup=function(e){try{dragObj(qd,e,3);}catch(ex){}};break;case 2:qd.style.left=(dragData.left+e.clientX-dragData.x)+'px';qd.style.top=(dragData.top+e.clientY-dragData.y)+'px';_e(e);break;case 3:dragData.x=0;dragData.y=0;head.onmousemove=null;head.onmouseup=null;break;}}function _e(e){if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}return e;}}

Q.zpic=function(e,o){o=Q.extend({prev:null,next:null,width:0,height:0,page:0,easing:'easeOutCirc',duration:300,auto:3000,init:500},o||{});var s=Q.getInnerSize(e),_=e.cloneNode(!0),w=D.createElement("div"),c=D.createElement("div"),n=D.createElement("div"),S={},t=null;Q.clear(e);e.appendChild(w);Q.setStyle(w,{overflow:"hidden",width:(o.width||s.width)+"px",height:(o.height||s.height)+"px",position:"relative"});n.innerHTML=_.innerHTML;w.appendChild(c);c.appendChild(n);Q.setStyle(c,{zoom:1,position:"relative"});Q.setStyle(c,"width","65535px");Q.setStyle(n,{float:"left"});s=Q.getSize(n);c.appendChild(n.cloneNode(!0));S.play=function(v){if(S.s==="ing")return;v=v===-1?-1:1;var l=parseFloat(Q.getStyle(c,"left"))||0;if(v===-1&&l>=0)l=-s.width;if(v===1&&Math.abs(l)>=s.width)l=0;S.s="ing";Q.animate(c,"left",l-v*o.page,o.duration,o.easing,function(){S.s="done";},l);};if(o.auto){setTimeout(function(){t=setInterval(S.play,o.auto);},o.init);Q(c).hover(function(){clearTimeout(t);},function(){clearTimeout(t);t=setInterval(S.play,o.auto);});};Q.bind(o.prev,"click",function(){clearTimeout(t);S.play(-1);if(o.auto){t=setInterval(S.play,o.auto);}});Q.bind(o.next,"click",function(){clearTimeout(t);S.play();if(o.auto){t=setInterval(S.play,o.auto);}});S.clear=function(){clearTimeout(t);Q.stop(c,"left");e.parentNode.replaceChild(_,e);};return S;}


})(window);



